<ion-navbar *navbar class="show-navbar" primary>
    <ion-title>{{currentSound ? currentSound.name : title}}</ion-title>
</ion-navbar>
<ion-content class="has-header">
    <ion-searchbar [(ngModel)]="searchQuery"></ion-searchbar>
    <ion-list no-border>
        <ion-item *ngFor="#sound of sounds | searchFilter:{name:searchQuery}" [ngClass]="{'selected':isSelected(sound)}" (click)="onPlay($event,sound)">
            <ion-thumbnail item-left *ngIf="sound.user_id">
                <img src="{{getThumbtail(sound.user_id)}}" />
            </ion-thumbnail>
            <h2>{{sound.name}}</h2>
            <p *ngIf="sound.user_id">{{getUsername(sound.user_id)}}</p>
            <p>Ajout√© le {{sound.creation_date | stringDate:'shortDate'}}</p>
                <span item-right [hidden]="!sound.playing">
                <div class="center-me">
                    <div class="equalizer"></div>
                </div>
            </span>
            <div item-right class="spinner" [hidden]="!sound.loading">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
            </div>
            <p>
                <button outline (click)="onClickFavoris($event)">
                    <ion-icon name="star"></ion-icon> Favoris
                </button>
                <button outline secondary [hidden]="!cacheService.soundInCache(sound.file)" (click)="removeFromCache($event,sound)">
                    <ion-icon name="archive"></ion-icon> Cache
                </button><br/>
                <button outline danger [hidden]="!sound.youtube_url" (click)="onRedirectYoutube($event,sound)">
                    <ion-icon name="desktop"></ion-icon> Youtube
                </button>
            </p>
        </ion-item>
    </ion-list>
    <ion-infinite-scroll (infinite)="doInfinite($event)">
        <ion-infinite-scroll-content
                loadingSpinner="bubbles"
                loadingText="Chargement des sons...">
        </ion-infinite-scroll-content>
    </ion-infinite-scroll>
</ion-content>
<ion-toolbar position="bottom">
    <media-player></media-player>
</ion-toolbar>